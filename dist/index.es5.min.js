/*!
 * 
 *  maishu-chitu-react v1.40.0
 *  https://github.com/ansiboy/services-sdk
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("maishu-chitu"),require("react-dom"),require("react"));else if("function"==typeof define&&define.amd)define(["maishu-chitu","react-dom","react"],t);else{var n="object"==typeof exports?t(require("maishu-chitu"),require("react-dom"),require("react")):t(e["maishu-chitu"],e["react-dom"],e.react);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"==typeof window?global:window,function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_PROPS=t.dataLoader=t.LOAD_DATA=void 0,t.LOAD_DATA="loadData",t.dataLoader=function(e){return function(n){return n[t.LOAD_DATA]=e,n}},t.LOAD_PROPS="loadProps"},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"canntFindAction",value:function(e){var t="Cannt find action in page '".concat(e,"', is the exports has default field?");return new Error(t)}},{key:"exportsCanntNull",value:function(e){var t="Exports of page '".concat(e,"' is null.");return new Error(t)}},{key:"containerNotExist",value:function(e){var t="Container ".concat(e," is not exists.");return new Error(t)}}]),e}();t.Errors=o},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Application=t.Page=void 0;var h=n(4),v=n(3),y=n(2),b=n(1),g=n(0),m=function(e){function t(){var e;return u(this,t),(e=c(this,f(t).apply(this,arguments))).component=null,e}return l(t,y.Page),t}();t.Page=m;var P=function(){function e(t){u(this,e),this.nodes={},this.modulesPath=t.endsWith("/")?t.substr(0,t.length-1):t}return a(e,[{key:"parse",value:function(e){var t=this,n=this.nodes[e];if(null==n){var r="".concat(e).split("_").join("/");this.modulesPath&&(r="".concat(this.modulesPath,"/").concat(r)),n={action:this.createDefaultAction(r,function(e){return t.loadjs(e)}),name:e},this.nodes[e]=n}return n}},{key:"createDefaultAction",value:function(e,t){var n=this;return function(r,o){return d(n,void 0,void 0,regeneratorRuntime.mark(function n(){var a,i,u,c,s,f,l,p,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:if(a=n.sent){n.next=5;break}throw b.Errors.exportsCanntNull(e);case 5:if(null!=(i=a.default)){n.next=8;break}throw b.Errors.canntFindAction(r.name);case 8:if(u={app:o,data:r.data,events:{shown:r.shown,showing:r.showing,hidden:r.hidden,hiding:r.hiding},source:r,createService:function(e){return r.createService(e)}},"function"!=typeof(c=a.loadProps)){n.next=15;break}return n.next=13,c(r.data,o);case 13:s=n.sent,u=Object.assign(u,s||{});case 15:if("function"!=typeof(f=a.loadData||i[g.LOAD_DATA])){n.next=21;break}return n.next=19,f(u);case 19:l=n.sent,Object.assign(u.data,l);case 21:p=h.createElement(i,u),d=v.render(p,r.element),r.component=d;case 24:case"end":return n.stop()}},n)}))}}}]),e}(),w="index",O=function(e){function t(e){var n;return u(this,t),void 0===(e=e||{}).modulesPath&&(e.modulesPath="modules"),e.parser||(e.parser=t.createPageNodeParser(e.modulesPath)),n=c(this,f(t).call(this,e)),e.parser.app=s(n),e.parser.loadjs=function(e){return n.loadjs(e)},n.defaultPage=e.defaultPage||w,n.pageType=m,"history"==(e.mode||"hash")&&(n.run=function(){var e=n.getRouteString();n.showPage(e)},n.parseUrl=function(t){var r,o,a=t.indexOf("?");a>0?(r=t.substr(a),o=t.substr(0,a)):o=t;var i=null===e||void 0===e?void 0:e.routers,u={};if(null!=i)for(var c=0;c<i.length;c++){var s=i[c].match(o);if(s){var f=s.controller,l=s.action;if(!f)throw new Error("Can not get controller from route data.");if(!l)throw new Error("Can not get action from route data.");Object.assign(u,s);break}}if(r){var p=r.substr(1),d=p?n.pareeUrlQuery(p):{};Object.assign(u,d)}var h=o.split("/").filter(function(e){return e});return{pageName:0==h.length?"index":h.join("_"),values:u}}),n}return l(t,y.Application),a(t,[{key:"createPageElement",value:function(e,n){var o=this.containers[n];if(null==o)throw b.Errors.containerNotExist(n);var a=o.querySelector('[name="'.concat(e,'"]'));return null==a&&(a=r(f(t.prototype),"createPageElement",this).call(this,e,n)).setAttribute("name",e),a}},{key:"getRouteString",value:function(){var e=window.targetUrl;return e||(e=location.pathname||this.defaultPage,location.search&&(e+=location.search)),"/"==(e=e.trim())[0]&&(e=e.substr(1)),e}}],[{key:"createPageNodeParser",value:function(e){return new P(e)}}]),t}();t.Application=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataLoader=t.Page=t.Application=void 0;var r=n(5);Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return r.Application}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return r.Page}});var o=n(0);Object.defineProperty(t,"dataLoader",{enumerable:!0,get:function(){return o.dataLoader}})}])});
//# sourceMappingURL=index.es5.min.js.map